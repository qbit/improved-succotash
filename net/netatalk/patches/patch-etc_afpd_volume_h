Index: etc/afpd/volume.h
--- etc/afpd/volume.h.orig
+++ etc/afpd/volume.h
@@ -36,6 +36,6 @@ int afp_closevol     (AFPObj *obj, char *ibuf, size_t 
 /* netatalk functions */
 extern void     close_all_vol   (void);
 
-struct vol *current_vol;        /* last volume from getvolbyvid() */
+extern struct vol *current_vol;        /* last volume from getvolbyvid() */
 
 #endif
